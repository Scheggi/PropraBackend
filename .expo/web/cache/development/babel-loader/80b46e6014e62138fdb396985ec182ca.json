{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { styles } from \"./styles\";\nimport { getRaceList, getWeatherTab, timeoutPromise, getWheelsList, getRaceDetails_by_ID } from \"./tools\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { PieChart, Pie, Sector, Cell, Tooltip, ResponsiveContainer, Legend } from 'recharts';\nimport { Line, LineChart, BarChart, Bar, XAxis, YAxis, CartesianGrid } from 'recharts';\nvar COLORS = ['#0B0B61', '#FF8042', '#FFBB28', '#0088FE', '#00C49F', '#8884D8'];\nvar RADIAN = Math.PI / 180;\n\nvar renderCustomizedLabel = function renderCustomizedLabel(_ref) {\n  var cx = _ref.cx,\n      cy = _ref.cy,\n      midAngle = _ref.midAngle,\n      innerRadius = _ref.innerRadius,\n      outerRadius = _ref.outerRadius,\n      percent = _ref.percent,\n      index = _ref.index;\n  var radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  var x = cx + radius * Math.cos(-midAngle * RADIAN);\n  var y = cy + radius * Math.sin(-midAngle * RADIAN);\n  return React.createElement(\"text\", {\n    x: x,\n    y: y,\n    fill: \"white\",\n    textAnchor: x > cx ? 'start' : 'end',\n    dominantBaseline: \"central\"\n  }, percent != 0 && (percent * 100).toFixed(0) + \"%\");\n};\n\nvar MaenScreen = function (_React$Component) {\n  _inherits(MaenScreen, _React$Component);\n\n  var _super = _createSuper(MaenScreen);\n\n  function MaenScreen(props) {\n    var _this;\n\n    _classCallCheck(this, MaenScreen);\n\n    _this = _super.call(this, props);\n\n    _this.changeRace = function (event) {\n      event.preventDefault();\n\n      _this.props.navigation.goBack();\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.getWeatherData();\n\n      _this.getWheelsStart();\n    };\n\n    _this.state = {\n      raceID: 1,\n      dataWeather: [],\n      data: [{\n        name: 'Slicks Cold',\n        value: 0\n      }, {\n        name: 'Slicks Medium',\n        value: 0\n      }, {\n        name: 'Slicks Hot',\n        value: 0\n      }, {\n        name: 'Inters Intermediate',\n        value: 0\n      }, {\n        name: 'Rain Dry Wet',\n        value: 0\n      }, {\n        name: 'Rain Heavy Wet',\n        value: 0\n      }],\n      raceList: [],\n      showLegend: false,\n      showText: false,\n      showWeatherData: false\n    };\n    _this.getRaceID = _this.getRaceID.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.handleSubmit2 = _this.handleSubmit2.bind(_assertThisInitialized(_this));\n    _this.getWheelsStart = _this.getWheelsStart.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MaenScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var accesstoken;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));\n\n            case 2:\n              accesstoken = _context.sent;\n              getRaceList(accesstoken).then(function (racelistDropdown) {\n                console.log(racelistDropdown);\n\n                _this2.setState({\n                  raceList: racelistDropdown\n                });\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.raceID != 0;\n    }\n  }, {\n    key: \"getRaceID\",\n    value: function getRaceID(event) {\n      var id;\n      return _regeneratorRuntime.async(function getRaceID$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              id = event.target.value;\n              this.setState({\n                raceID: id\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"handleSubmit2\",\n    value: function handleSubmit2() {\n      var data = this.state.dataWeather;\n      var data2 = [];\n\n      for (var i = 0; i < data.length; i++) {\n        var uhrzeit = data[i][\"datetime\"].split(' ');\n        var uhrzeit1 = uhrzeit[4].split(':');\n        var uhrzeitFinal = \"\" + uhrzeit1[0] + \":\" + uhrzeit1[1];\n        data2.push({\n          \"Uhrzeit\": uhrzeitFinal,\n          \"Streckentemperatur\": data[i][\"temp_ground\"],\n          \"Lufttemperatur\": data[i][\"temp_air\"]\n        });\n      }\n\n      this.setState({\n        dataWeather: data2\n      });\n      this.setState({\n        showWeatherData: 1\n      });\n    }\n  }, {\n    key: \"getWeatherData\",\n    value: function getWeatherData() {\n      var _this3 = this;\n\n      var accesstoken, raceID;\n      return _regeneratorRuntime.async(function getWeatherData$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));\n\n            case 2:\n              accesstoken = _context3.sent;\n              raceID = this.state.raceID;\n              console.log(raceID);\n              getWeatherTab(accesstoken, raceID).then(function (DataTabular) {\n                console.log(DataTabular);\n\n                _this3.setState({\n                  dataWeather: DataTabular\n                });\n\n                console.log(_this3.state.dataWeather);\n\n                _this3.handleSubmit2();\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getWheelsStart\",\n    value: function getWheelsStart() {\n      var _this4 = this;\n\n      var accesstoken, raceID;\n      return _regeneratorRuntime.async(function getWheelsStart$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));\n\n            case 2:\n              accesstoken = _context4.sent;\n              AsyncStorage.setItem('raceID', this.state.raceID);\n              _context4.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('raceID'));\n\n            case 6:\n              raceID = _context4.sent;\n              console.log(raceID);\n              getWheelsList(accesstoken, raceID).then(function (liste) {\n                console.log(liste);\n                var liste1 = liste.filter(function (entry) {\n                  return entry.set == 1;\n                });\n                var numberOfSlicksCold = parseFloat(liste1[0][\"numberOfSets\"]);\n                liste1 = liste.filter(function (entry) {\n                  return entry.set == 2;\n                });\n                var numberOfSlicksMedium = parseFloat(liste1[0][\"numberOfSets\"]);\n                liste1 = liste.filter(function (entry) {\n                  return entry.set == 3;\n                });\n                var numberOfSlicksHot = parseFloat(liste1[0][\"numberOfSets\"]);\n                liste1 = liste.filter(function (entry) {\n                  return entry.set == 4;\n                });\n                var numberOfIntersIntermediate = parseFloat(liste1[0][\"numberOfSets\"]);\n                liste1 = liste.filter(function (entry) {\n                  return entry.set == 5;\n                });\n                var numberOfRainDryWet = parseFloat(liste1[0][\"numberOfSets\"]);\n                liste1 = liste.filter(function (entry) {\n                  return entry.set == 6;\n                });\n                var numberOfRainHeavyWet = parseFloat(liste1[0][\"numberOfSets\"]);\n                var data = [{\n                  name: 'Slicks Cold',\n                  value: numberOfSlicksCold\n                }, {\n                  name: 'Slicks Medium',\n                  value: numberOfSlicksMedium\n                }, {\n                  name: 'Slicks Hot',\n                  value: numberOfSlicksHot\n                }, {\n                  name: 'Inters Intermediate',\n                  value: numberOfIntersIntermediate\n                }, {\n                  name: 'Rain Dry Wet',\n                  value: numberOfRainDryWet\n                }, {\n                  name: 'Rain Heavy Wet',\n                  value: numberOfRainHeavyWet\n                }];\n\n                _this4.setState({\n                  data: data\n                });\n\n                _this4.setState({\n                  showLegend: 1\n                });\n\n                _this4.setState({\n                  showText: 1\n                });\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var optionTemplate = this.state.raceList.map(function (v) {\n        return React.createElement(\"option\", {\n          value: v.id,\n          key: v.id\n        }, v.name);\n      });\n      return React.createElement(View, {\n        style: viewStyles1\n      }, React.createElement(\"label\", null, \" Rennen ausw\\xE4hlen: \", React.createElement(\"select\", {\n        value: this.state.id,\n        onChange: this.getRaceID\n      }, optionTemplate)), React.createElement(Button, {\n        title: \"Daten anzeigen\",\n        onPress: this.handleSubmit\n      }), React.createElement(\"br\", null), React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        }\n      }, React.createElement(\"div\", null, this.state.showText && React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          fontWeight: 'bold',\n          fontFamily: 'arial'\n        }\n      }, \"Reifendaten:\"), React.createElement(PieChart, {\n        width: 400,\n        height: 400\n      }, React.createElement(Pie, {\n        dataKey: \"value\",\n        isAnimationActive: true,\n        labelLine: false,\n        data: this.state.data,\n        cx: \"50%\",\n        cy: \"50%\",\n        outerRadius: 150,\n        fill: \"#8884d8\",\n        label: renderCustomizedLabel\n      }, this.state.data.map(function (entry, index) {\n        return React.createElement(Cell, {\n          key: \"cell-\" + index,\n          fill: COLORS[index % COLORS.length]\n        });\n      })), React.createElement(Tooltip, null), this.state.showLegend && React.createElement(Legend, null))), React.createElement(\"div\", null, this.state.showText && React.createElement(Text, {\n        style: styles.textStyles\n      }, \"Wetterdaten:\", React.createElement(\"br\", null), React.createElement(\"br\", null)), this.state.showWeatherData && React.createElement(LineChart, {\n        width: 600,\n        height: 400,\n        data: this.state.dataWeather,\n        margin: {\n          top: 5,\n          right: 30,\n          left: 20,\n          bottom: 5\n        }\n      }, React.createElement(CartesianGrid, {\n        strokeDasharray: \"3 3\"\n      }), React.createElement(XAxis, {\n        dataKey: \"Uhrzeit\"\n      }), React.createElement(YAxis, null), React.createElement(Tooltip, null), React.createElement(Legend, null), React.createElement(Line, {\n        type: \"monotone\",\n        dataKey: \"Lufttemperatur\",\n        stroke: \"red\"\n      }), React.createElement(Line, {\n        type: \"monotone\",\n        dataKey: \"Streckentemperatur\",\n        stroke: \"green\"\n      })))), React.createElement(Button, {\n        title: \"zur\\xFCck\",\n        onPress: this.changeRace\n      }), React.createElement(Text, {\n        style: {\n          height: 50\n        }\n      }));\n    }\n  }]);\n\n  return MaenScreen;\n}(React.Component);\n\nexport { MaenScreen as default };\nvar viewStyles1 = {\n  flex: 1,\n  alignItems: 'center',\n  justifyContent: 'center',\n  fontFamily: 'arial',\n  overflowY: 'scroll',\n  overflowX: 'scroll'\n};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/Maen.js"],"names":["React","styles","getRaceList","getWeatherTab","timeoutPromise","getWheelsList","getRaceDetails_by_ID","AsyncStorage","Icon","PieChart","Pie","Sector","Cell","Tooltip","ResponsiveContainer","Legend","Line","LineChart","BarChart","Bar","XAxis","YAxis","CartesianGrid","COLORS","RADIAN","Math","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","index","radius","x","cos","y","sin","toFixed","MaenScreen","props","changeRace","event","preventDefault","navigation","goBack","handleSubmit","getWeatherData","getWheelsStart","state","raceID","dataWeather","data","name","value","raceList","showLegend","showText","showWeatherData","getRaceID","bind","handleSubmit2","getItem","accesstoken","then","racelistDropdown","console","log","setState","catch","error","id","target","data2","i","length","uhrzeit","split","uhrzeit1","uhrzeitFinal","push","DataTabular","setItem","liste","liste1","filter","entry","set","numberOfSlicksCold","parseFloat","numberOfSlicksMedium","numberOfSlicksHot","numberOfIntersIntermediate","numberOfRainDryWet","numberOfRainHeavyWet","optionTemplate","map","v","viewStyles1","flexDirection","fontSize","fontWeight","fontFamily","textStyles","top","right","left","bottom","height","Component","flex","alignItems","justifyContent","overflowY","overflowX"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n    View,\n    Text,\n    StyleSheet,\n    Image,\n    TextInput,\n    TouchableHighlight,\n    SectionList,\n    TouchableOpacity,\n    ScrollView,\n} from 'react-native';\nimport {styles} from \"./styles\"\nimport {getRaceList, getWeatherTab, timeoutPromise,getWheelsList,getRaceDetails_by_ID} from \"./tools\"\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport {Button} from \"react-native-web\";\nimport { PieChart, Pie, Sector, Cell, Tooltip, ResponsiveContainer, Legend } from 'recharts';\nimport { Line, LineChart, BarChart, Bar, XAxis, YAxis, CartesianGrid} from 'recharts';\n\n\nconst COLORS = ['#0B0B61','#FF8042', '#FFBB28','#0088FE', '#00C49F', '#8884D8'];\n\nconst RADIAN = Math.PI / 180;\nconst renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index }) => {\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n  return (\n    <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\n      {percent!=0 &&`${(percent * 100).toFixed(0)}%`}\n    </text>\n  );\n};\n\n\nexport default class MaenScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            raceID :1,\n            dataWeather: [],\n            data: [{name: 'Slicks Cold', value: 0},\n                   { name: 'Slicks Medium', value: 0 },\n                   { name: 'Slicks Hot', value: 0 },\n                   { name: 'Inters Intermediate', value: 0 },\n                   { name: 'Rain Dry Wet', value: 0 },\n                   { name: 'Rain Heavy Wet', value: 0 },\n            ],\n            raceList: [],\n            showLegend: false,\n            showText: false,\n            showWeatherData: false,\n\n        }\n        this.getRaceID=this.getRaceID.bind(this);\n        this.handleSubmit=this.handleSubmit.bind(this);\n        this.handleSubmit2=this.handleSubmit2.bind(this);\n        this.getWheelsStart=this.getWheelsStart.bind(this);\n    }\n   async componentDidMount() {\n        const accesstoken = await AsyncStorage.getItem('accesstoken');\n        getRaceList(accesstoken).then(racelistDropdown => {\n            console.log(racelistDropdown);\n            this.setState({raceList: racelistDropdown})\n        }).catch(function (error) {\n            console.log(error);\n        })\n    }\n   validateForm() {\n       return this.state.raceID!=0;\n    }\n     async getRaceID(event) {\n        //AsyncStorage.setItem('raceID', event.target.value);\n        //const id = await AsyncStorage.getItem('raceID');\n         const id=event.target.value;\n        this.setState({raceID: id});\n    }\n\n\n    changeRace = event => {\n        event.preventDefault();\n        this.props.navigation.goBack();\n    }\n\n    handleSubmit = event =>{\n        event.preventDefault();\n        this.getWeatherData();\n        this.getWheelsStart();\n    }\n\n    handleSubmit2(){\n        const data=this.state.dataWeather;\n        const data2=[];\n        for(let i = 0; i < data.length; i++) {\n            const uhrzeit=data[i][\"datetime\"].split(' ');\n            const uhrzeit1=uhrzeit[4].split(':');\n            const uhrzeitFinal=\"\"+uhrzeit1[0]+\":\"+uhrzeit1[1];\n            data2.push({\"Uhrzeit\": uhrzeitFinal, \"Streckentemperatur\": data[i][\"temp_ground\"], \"Lufttemperatur\": data[i][\"temp_air\"]});\n          }\n        this.setState({dataWeather: data2});\n        this.setState({showWeatherData: 1});\n    }\n\n    async getWeatherData(){\n       const accesstoken = await AsyncStorage.getItem('accesstoken');\n       //const raceID = await AsyncStorage.getItem('raceID');\n        const raceID= this.state.raceID;\n       console.log(raceID)\n       getWeatherTab(accesstoken, raceID).then(DataTabular => {\n                console.log(DataTabular);\n                this.setState({dataWeather: DataTabular});\n                console.log(this.state.dataWeather);\n                this.handleSubmit2();\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    async getWheelsStart(){\n        const accesstoken = await AsyncStorage.getItem('accesstoken');\n        AsyncStorage.setItem('raceID', this.state.raceID);\n        const raceID = await AsyncStorage.getItem('raceID');\n        console.log(raceID)\n        getWheelsList(accesstoken,raceID).then(liste => {\n            console.log(liste);\n            //this.setState({listWheelStart: liste});\n            let liste1 = liste.filter(entry => entry.set==1);\n             const numberOfSlicksCold=parseFloat(liste1[0][\"numberOfSets\"]);\n            liste1 = liste.filter(entry => entry.set==2);\n             const numberOfSlicksMedium=parseFloat(liste1[0][\"numberOfSets\"]);\n            liste1 = liste.filter(entry => entry.set==3);\n             const numberOfSlicksHot=parseFloat(liste1[0][\"numberOfSets\"]);\n            liste1 = liste.filter(entry => entry.set==4);\n             const numberOfIntersIntermediate=parseFloat(liste1[0][\"numberOfSets\"]);\n            liste1 = liste.filter(entry => entry.set==5);\n             const numberOfRainDryWet=parseFloat(liste1[0][\"numberOfSets\"]);\n            liste1 = liste.filter(entry => entry.set==6);\n             const numberOfRainHeavyWet=parseFloat(liste1[0][\"numberOfSets\"]);\n             const data =[{name: 'Slicks Cold', value: numberOfSlicksCold},\n                     { name: 'Slicks Medium', value: numberOfSlicksMedium },\n                     { name: 'Slicks Hot', value:  numberOfSlicksHot},\n                     { name: 'Inters Intermediate', value: numberOfIntersIntermediate },\n                     { name: 'Rain Dry Wet', value: numberOfRainDryWet },\n                     { name: 'Rain Heavy Wet', value: numberOfRainHeavyWet }\n             ];\n             this.setState({data: data });\n             this.setState({showLegend: 1});\n             this.setState({showText: 1});\n\n        }).catch(function (error) {\n            console.log(error);\n        })\n    }\n\n\n    render() {\n         let optionTemplate = this.state.raceList.map(v => (\n            <option value={v.id} key={v.id}>{v.name}</option>\n        ));\n        return (\n        <View style={viewStyles1}>\n            {/*<View style={{marginLeft: 'auto', marginRight: 'auto'}}>*/}\n                <label /*style={{fontSize: 16, fontFamily: 'arial', textAlign: 'center'}}*/ > Rennen auswählen: <select\n                    value={this.state.id} onChange={this.getRaceID}>\n                    {optionTemplate}\n                </select>\n                </label>\n            {/*</View>*/}\n         <Button\n                        //disabled={!this.validateForm()}\n                        title=\"Daten anzeigen\"\n                        onPress={this.handleSubmit}\n                    />\n                <br></br>\n            <View style={{flexDirection: 'row'}}>\n         <div>\n             {this.state.showText &&\n             <Text style={{fontSize: 30, fontWeight: 'bold', fontFamily: 'arial',}}>Reifendaten:</Text>\n             }\n         <PieChart width={400} height={400}>\n            <Pie\n            dataKey=\"value\"\n            isAnimationActive={true}\n            labelLine={false}\n            data={this.state.data}\n            cx=\"50%\"\n            cy=\"50%\"\n            outerRadius={150}\n            fill=\"#8884d8\"\n            label={renderCustomizedLabel}\n          >\n          {this.state.data.map((entry, index) => (\n              <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n            ))}\n          </Pie>\n            <Tooltip />\n            {this.state.showLegend &&\n                <Legend/>\n            }\n        </PieChart>\n        </div>\n        <div>\n            {this.state.showText &&\n            <Text style={styles.textStyles}>\n                Wetterdaten:\n                <br></br>\n                <br></br>\n            </Text>\n            }\n            {this.state.showWeatherData &&\n                <LineChart width={600} height={400} data={this.state.dataWeather} margin={{\n                top: 5,\n                right: 30,\n                left: 20,\n                bottom: 5,\n            }}>\n                <CartesianGrid strokeDasharray=\"3 3\"></CartesianGrid>\n                <XAxis dataKey=\"Uhrzeit\"></XAxis>\n                <YAxis></YAxis>\n                <Tooltip></Tooltip>\n                <Legend></Legend>\n                <Line type=\"monotone\" dataKey=\"Lufttemperatur\"     stroke=\"red\" />\n                <Line type=\"monotone\" dataKey=\"Streckentemperatur\" stroke=\"green\" />\n                </LineChart>\n            }\n          </div>\n            </View>\n        <Button\n                        title=\"zurück\"\n                        onPress={this.changeRace}\n                />\n            <Text style={{height:50}}></Text>\n        </View>\n        );\n    }\n}\nconst viewStyles1= {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontFamily: 'arial',\n        overflowY: 'scroll',\n        overflowX: 'scroll',\n    };"]},"metadata":{},"sourceType":"module"}