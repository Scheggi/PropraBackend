{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import AsyncStorage from'@react-native-async-storage/async-storage';function changeWheelSet(id,variant,order_duration,description){return _regeneratorRuntime.async(function changeWheelSet$(_context){while(1){switch(_context.prev=_context.next){case 0:timeoutPromise(2000,fetch('https://api.race24.cloud/wheel_cont/changeSet',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({id:id,variant:variant,order_duration:order_duration,description:description})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){console.log(data[0]);}else{console.log(\"failed\");}}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);}function createNewRaceRequest(accesstoken,type,place,date){return _regeneratorRuntime.async(function createNewRaceRequest$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log([accesstoken,type,place,date]);_context2.next=3;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/race/create',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,type:type,place:place,date:date})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){createNewRaceRequest(token,type,place,date);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{return data[0].id;}return[];}).catch(function(error){console.log(error);return[];}));case 3:return _context2.abrupt(\"return\",_context2.sent);case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);}function saveChangesOrderSet(accesstoken,type,place,date){return _regeneratorRuntime.async(function saveChangesOrderSet$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log([accesstoken,type,place,date]);_context3.next=3;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/race/create',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,type:type,place:place,date:date})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){createNewRaceRequest(token,type,place,date);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{return data[0].id;}return[];}).catch(function(error){console.log(error);return[];}));case 3:return _context3.abrupt(\"return\",_context3.sent);case 4:case\"end\":return _context3.stop();}}},null,null,null,Promise);}function sendNewWeatherRequest(id,temp_air,temp_ground,weather_des){return _regeneratorRuntime.async(function sendNewWeatherRequest$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:timeoutPromise(2000,fetch('https://api.race24.cloud/user/weather/create',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({raceID:AsyncStorage.getItem(\"raceID\"),temp_air:temp_air,temp_ground:temp_ground,weather_des:weather_des})})).then(function(response){return response.json();}).then().catch(function(error){console.log(error);});case 1:case\"end\":return _context4.stop();}}},null,null,null,Promise);}function timeoutPromise(ms,promise){return new Promise(function(resolve,reject){var timeoutId=setTimeout(function(){reject(new Error(\"promise timeout\"));},ms);promise.then(function(res){clearTimeout(timeoutId);resolve(res);},function(err){clearTimeout(timeoutId);reject(err);});});}function getRaceList(token){return timeoutPromise(2000,fetch(\"https://api.race24.cloud/user/race/get\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:token})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"||data[\"msg\"]===\"Not enough segments\"){refreshToken().then(function(token){console.log(token);getRaceList(token);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].data);return data[0].data;}return[];}).catch(function(error){console.log(error);return[];});}function getRaceDetails_by_ID(accesstoken,raceid){return timeoutPromise(2000,fetch(\"https://api.race24.cloud/user/raceDetails/get\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,raceID:raceid})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){getRaceDetails_by_ID(token,raceid);console.log([token,raceid]);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].data);return data[0].data;}return[];}).catch(function(error){console.log(error);return[];});}function getWeatherTab(accesstoken,raceID){console.log(raceID);return timeoutPromise(2000,fetch(\"https://api.race24.cloud/user/weather/getlast10\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,raceID:raceID})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){getWeatherTab(token,raceID);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].data);return data[0].data;}return[];}).catch(function(error){console.log(error);return[];});}function getWheelsList(accesstoken,raceID){console.log([raceID]);return timeoutPromise(2000,fetch(\"https://api.race24.cloud/wheels_start/get\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,raceID:parseInt(raceID)})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){getWheelsList(token,raceID);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].data);return data[0].data;}return[];}).catch(function(error){console.log(error);return[];});}function getFormelList(accesstoken){return timeoutPromise(2000,fetch(\"https://api.race24.cloud/formel/get\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken})})).then(function(response){return response.json();}).then(function(data){console.log(data);if(\"msg\"in data){if(data[\"msg\"]===\"Token has expired\"){refreshToken().then(function(token){getFormelList(token);}).catch(function(error){console.log(\"Refresh failed\");console.log(error);});return[];}}else{console.log(\"Return Data\");console.log(data[0].data);return data[0].data;}return[];}).catch(function(error){console.log(error);return[];});}function refreshToken(){var accesstoken,refreshtoken;return _regeneratorRuntime.async(function refreshToken$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem('accesstoken'));case 2:accesstoken=_context5.sent;_context5.next=5;return _regeneratorRuntime.awrap(AsyncStorage.getItem('refreshtoken'));case 5:refreshtoken=_context5.sent;_context5.next=8;return _regeneratorRuntime.awrap(timeoutPromise(2000,fetch('https://api.race24.cloud/user/auth/refresh',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({access_token:accesstoken,refresh_token:refreshtoken})})).then(function(response){return response.json();}).then(function(data){AsyncStorage.setItem('accesstoken',String(data.access_token));}));case 8:case\"end\":return _context5.stop();}}},null,null,null,Promise);}function TableNiklas(list){var colNames=['Zeitstempel','Lufttemperatur','Streckentemperatur','StreckenverhÃ¤ltnis'];var number=920;return React.createElement(\"div\",null,list.length>0&&React.createElement(\"table\",{cellSpacing:\"0\",style:{width:width,height:\"auto\",margin:15,borderWidth:1}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,colNames.map(function(headerItem,index){return React.createElement(\"th\",{style:{borderStyle:'solid',borderWidth:1},key:index},headerItem);}))),React.createElement(\"tbody\",null,Object.values(list).map(function(obj,index){return React.createElement(\"tr\",{key:index},Object.values(obj).map(function(value,index2){return React.createElement(\"td\",{style:{borderStyle:'solid',borderWidth:1},key:index2},value);}));}))));}export{createNewRaceRequest,getWeatherTab,timeoutPromise,refreshToken,getRaceList,getFormelList,TableNiklas,getWheelsList,getRaceDetails_by_ID,changeWheelSet};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/tools.js"],"names":["AsyncStorage","changeWheelSet","id","variant","order_duration","description","timeoutPromise","fetch","method","headers","body","JSON","stringify","then","response","json","data","console","log","catch","error","createNewRaceRequest","accesstoken","type","place","date","access_token","refreshToken","token","saveChangesOrderSet","sendNewWeatherRequest","temp_air","temp_ground","weather_des","raceID","getItem","ms","promise","Promise","resolve","reject","timeoutId","setTimeout","Error","res","clearTimeout","err","getRaceList","getRaceDetails_by_ID","raceid","getWeatherTab","getWheelsList","parseInt","getFormelList","refreshtoken","refresh_token","setItem","String","TableNiklas","list","colNames","number","length","width","height","margin","borderWidth","map","headerItem","index","borderStyle","Object","values","obj","value","index2"],"mappings":"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","sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\n\n// create new race and return raceID\n//wheel_cont/changeSet\nasync function changeWheelSet(id,variant,order_duration,description){\n    timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/wheel_cont/changeSet', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    id:id,\n                    variant:variant,\n                    order_duration:order_duration,\n                    description:description,\n                })\n            })\n            ).then(response => response.json()).then(\n                data => {\n                if (data[1]==200) {\n                    console.log(data[0])\n                }\n                else {\n                    console.log(\"failed\")\n                }\n            }\n            ).catch(function (error) {\n            console.log(error);\n        })\n}\n\n\n\nasync function createNewRaceRequest(accesstoken,type,place,date) {\n    console.log([accesstoken,type,place,date]);\n    return await timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/race/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    access_token:accesstoken,\n                    type:type,\n                    place:place,\n                    date:date,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                console.log(data)\n                if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                    createNewRaceRequest(token,type,place,date);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  return data[0].id;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\nasync function saveChangesOrderSet(accesstoken,type,place,date) {\n    console.log([accesstoken,type,place,date]);\n    return await timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/race/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    access_token:accesstoken,\n                    type:type,\n                    place:place,\n                    date:date,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                console.log(data)\n                if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                    createNewRaceRequest(token,type,place,date);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  return data[0].id;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\nasync function sendNewWeatherRequest(id,temp_air,temp_ground,weather_des) {\n   timeoutPromise(2000, fetch(\n        'https://api.race24.cloud/user/weather/create', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                raceID: AsyncStorage.getItem(\"raceID\"),\n                temp_air:temp_air,\n                temp_ground:temp_ground,\n                weather_des:weather_des,\n            })\n        })\n        ).then(response => response.json()).then(\n            //timer von 30 min neu startem\n            ).catch(function (error) {\n            console.log(error);\n        })\n}\n\n\n\nfunction timeoutPromise(ms, promise) {\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error(\"promise timeout\"))\n    }, ms);\n    promise.then(\n      (res) => {\n        clearTimeout(timeoutId);\n        resolve(res);\n      },\n      (err) => {\n        clearTimeout(timeoutId);\n        reject(err);\n      }\n    );\n  })\n}\n\n//get Race List\nfunction getRaceList(token) {\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/race/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: token\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"]=== \"Token has expired\" || data[\"msg\"]===\"Not enough segments\" ){\n                                refreshToken().then( token => {\n                                    console.log(token)\n                                    getRaceList(token);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n// get RaceDetails od RaceID\nfunction getRaceDetails_by_ID(accesstoken,raceid) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/raceDetails/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID:raceid,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getRaceDetails_by_ID(token,raceid);\n                                        console.log([token,raceid])\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\n\n///user/weather/getlast10\n//get Weather Tab\nfunction getWeatherTab(accesstoken,raceID) {\n    console.log(raceID)\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/user/weather/getlast10\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID : raceID,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getWeatherTab(token,raceID);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n//get Wheels\nfunction getWheelsList(accesstoken,raceID) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n    console.log([raceID])\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/wheels_start/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n          raceID: parseInt(raceID)\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getWheelsList(token,raceID);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\n\n\nfunction getFormelList(accesstoken) {\n  //const accesstoken = AsyncStorage.getItem('accesstoken');\n  return timeoutPromise(2000, fetch(\"https://api.race24.cloud/formel/get\", {\n      method: 'POST',\n      headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n          access_token: accesstoken,\n      })\n      })).then(response => response.json()).then(data => {\n              console.log(data);\n              if (\"msg\" in data){\n                            if (data[\"msg\"] === \"Token has expired\"){\n                                refreshToken().then( token => {\n                                        getFormelList(token);\n                                    }\n                                ).catch( function (error) {\n                                        console.log(\"Refresh failed\");\n                                        console.log(error);\n                                    }\n                                );\n                                return [];\n                            }\n                        }\n              else{\n                  console.log(\"Return Data\");\n                  console.log(data[0].data);\n                  return data[0].data;\n              }\n              return [];\n      }).catch(function (error) {\n            console.log(error);\n            return [];\n        })\n}\n\n\n\nasync function refreshToken() {\n  let accesstoken = await AsyncStorage.getItem('accesstoken');\n  let refreshtoken = await AsyncStorage.getItem('refreshtoken');\n  await timeoutPromise(2000, fetch(\n      'https://api.race24.cloud/user/auth/refresh', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          access_token: accesstoken,\n          refresh_token: refreshtoken,\n        })\n      }\n  )).then(\n      response => response.json()\n  ).then(\n      data => {\n        AsyncStorage.setItem('accesstoken', String(data.access_token));\n      }\n  )\n}\n\nfunction TableNiklas(list) {\n    const colNames = ['Zeitstempel', 'Lufttemperatur', 'Streckentemperatur', 'StreckenverhÃ¤ltnis' ];\n    const number = 920 ;\n    return (\n        <div>\n          {list.length > 0 && (\n            <table\n              cellSpacing='0'\n              style={{\n              \twidth: width,\n              \theight: \"auto\",\n              \tmargin: 15,\n              \tborderWidth: 1,\n\n              }}>\n\n                <thead >\n                  <tr>\n                    {colNames.map((headerItem, index) => (\n                      <th style={{borderStyle: 'solid',  borderWidth: 1}} key={index}>{headerItem}</th>\n                    ))}\n                  </tr>\n                </thead>\n\n                <tbody>\n                  {Object.values(list).map((obj, index) => (\n                    <tr key={index}>\n                      {Object.values(obj).map((value, index2) => (\n                        <td style={{borderStyle: 'solid',  borderWidth: 1}} key={index2}>{value}</td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n            </table>\n          )}\n        </div>\n        )\n    }\n\n\n\n\nexport {createNewRaceRequest,getWeatherTab,timeoutPromise, refreshToken,getRaceList,getFormelList,TableNiklas,getWheelsList,getRaceDetails_by_ID,changeWheelSet}"]},"metadata":{},"sourceType":"module"}