{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { styles } from \"./styles\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { timeoutPromise, refreshToken, syncData } from \"./tools\";\n\nvar NewUserScreen = function (_React$Component) {\n  _inherits(NewUserScreen, _React$Component);\n\n  var _super = _createSuper(NewUserScreen);\n\n  function NewUserScreen(props) {\n    var _this;\n\n    _classCallCheck(this, NewUserScreen);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      firsname: '',\n      lastname: '',\n      username: '',\n      password: '',\n      group: 'Helper'\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(NewUserScreen, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        group: event.target.group\n      });\n    }\n  }, {\n    key: \"handleSubmitDrop\",\n    value: function handleSubmitDrop(event) {\n      alert('group is: ' + this.state.group);\n      event.preventDefault();\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.username.length > 0 && this.state.password.length > 0;\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      this.sendNewRaceRequest(this.state.username, this.state.firstname, this.state.lastname, this.state.password, this.state.group);\n    }\n  }, {\n    key: \"sendNewRaceRequest\",\n    value: function sendNewRaceRequest(username, firstname, lastname, password, group) {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function sendNewRaceRequest$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(group);\n              timeoutPromise(2000, fetch('https://api.race24.cloud/user/create', {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  username: username,\n                  first_name: firstname,\n                  last_name: lastname,\n                  password: password,\n                  group: group\n                })\n              })).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data[1] == 200) {\n                  console.log(data[0]);\n\n                  _this2.props.navigation.replace('Race');\n                } else {\n                  console.log(\"failed\");\n                }\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.viewStyles\n      }, React.createElement(Text, {\n        style: styles.textStyles\n      }, \"Neues Mitglied anlegen\"), React.createElement(View, null, React.createElement(Text, null, \"Vorname \"), React.createElement(TextInput, {\n        style: {\n          height: 60\n        },\n        placeholder: \"Vorname\",\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            firstname: text.trim()\n          });\n        }\n      }), React.createElement(Text, null, \"Nachname: \"), React.createElement(TextInput, {\n        style: {\n          height: 60\n        },\n        placeholder: \" Nachname\",\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            lastname: text.trim()\n          });\n        }\n      }), React.createElement(Text, null, \" Username : \"), React.createElement(TextInput, {\n        style: {\n          height: 60\n        },\n        placeholder: \" username\",\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            username: text.trim()\n          });\n        }\n      }), React.createElement(Text, null, \" Passwort : \"), React.createElement(TextInput, {\n        style: {\n          height: 60\n        },\n        secureTextEntry: true,\n        placeholder: \" Passwort\",\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            password: text\n          });\n        }\n      }), React.createElement(\"form\", null, React.createElement(\"label\", null, \"Ordne dem Mitglied eine Gruppe zu:\", React.createElement(\"select\", {\n        group: this.state.group,\n        onChange: function onChange(text) {\n          return _this3.setState({\n            group: text.target.value\n          });\n        }\n      }, React.createElement(\"option\", {\n        group: \"Helfer\"\n      }, \"Helfer\"), React.createElement(\"option\", {\n        group: \"Manager\"\n      }, \"Manager\"), React.createElement(\"option\", {\n        group: \"Ingenieur\"\n      }, \"Ingenieur\")))), React.createElement(Button, {\n        disabled: !this.validateForm(),\n        title: \"neues Mitglied anlegen\",\n        onPress: this.handleSubmit\n      })));\n    }\n  }]);\n\n  return NewUserScreen;\n}(React.Component);\n\nexport { NewUserScreen as default };","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/NewUser.js"],"names":["React","styles","AsyncStorage","timeoutPromise","refreshToken","syncData","NewUserScreen","props","state","firsname","lastname","username","password","group","handleChange","bind","handleSubmit","event","setState","target","alert","preventDefault","length","sendNewRaceRequest","firstname","console","log","fetch","method","headers","body","JSON","stringify","first_name","last_name","then","response","json","data","navigation","replace","catch","error","viewStyles","textStyles","height","text","trim","value","validateForm","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Button, Text, TextInput, ToastAndroid, View} from \"react-native\";\nimport {styles} from \"./styles\"\n//import { AsyncStorage } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {timeoutPromise, refreshToken, syncData} from \"./tools\";\n\nexport default class NewUserScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            firsname: '',\n            lastname: '',\n            username: '',\n            password: '',\n            group: 'Helper',\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleChange(event) { this.setState({group: event.target.group});  }\n    handleSubmitDrop(event) {\n        alert('group is: ' + this.state.group);\n    event.preventDefault();\n    }\n\n    /*\n    getRaceId(){\n        var today = new Date();\n        var dd = String(today.getDate()).padStart(2, '0');\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n        var yyyy = today.getFullYear();\n        today = dd+mm+yyyy;\n        this.state.date = dd+\".\"+mm+\".\"+yy;\n        this.state.id = parseInt(today);\n    }\n    */\n\n    validateForm() {\n        return this.state.username.length > 0 && this.state.password.length > 0  ;\n    }\n    handleSubmit(event){\n        event.preventDefault();\n        this.sendNewRaceRequest(this.state.username, this.state.firstname,this.state.lastname,\n            this.state.password,this.state.group);\n    }\n    async sendNewRaceRequest(username,firstname,lastname,password,group) {\n        console.log(group);\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/user/create', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    username: username,\n                    first_name: firstname,\n                    last_name:lastname,\n                    password:password,\n                    group:group,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                if (data[1]==200) {\n                    console.log(data[0])\n                    this.props.navigation.replace('Race');\n                }\n                else {\n                    console.log(\"failed\")\n                }\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n\n    render() {\n        return (\n            <View style={styles.viewStyles}>\n                <Text style={styles.textStyles}>\n                    Neues Mitglied anlegen\n                </Text>\n\n                <View >\n                    <Text >Vorname </Text>\n                    <TextInput\n                        style={{height:60 }}\n                        placeholder=\"Vorname\"\n                        onChangeText={(text) => this.setState({firstname:text.trim()})}\n                    />\n                    <Text>Nachname: </Text>\n                    <TextInput\n                        style={{height: 60}}\n                        placeholder=\" Nachname\"\n                        onChangeText={(text) => this.setState({lastname:text.trim()})}\n                    />\n                    <Text> Username : </Text>\n                    <TextInput\n                        style={{height: 60}}\n                        placeholder=\" username\"\n                        onChangeText={(text) => this.setState({username:text.trim()})}\n                    />\n                    <Text> Passwort : </Text>\n                    <TextInput\n                        style={{height: 60}}\n                        secureTextEntry={true}\n                        placeholder=\" Passwort\"\n                        onChangeText={(text) => this.setState({password:text})}\n                    />\n                    <form >\n                        <label>\n                          Ordne dem Mitglied eine Gruppe zu:\n                          <select group={this.state.group} onChange={(text) => this.setState({group:text.target.value})}>\n                            <option group=\"Helfer\">Helfer</option>\n                            <option group=\"Manager\">Manager</option>\n                            <option group=\"Ingenieur\">Ingenieur</option>\n                          </select>\n                        </label>\n                    </form>\n\n                    <Button\n                        disabled={!this.validateForm()}\n                        title=\"neues Mitglied anlegen\"\n                        onPress={this.handleSubmit}\n                    />\n                    \n                    \n                </View>\n\n            </View>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}