{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from\"react\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import View from\"react-native-web/dist/exports/View\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import{styles}from\"./styles\";import AsyncStorage from'@react-native-async-storage/async-storage';import{timeoutPromise}from\"./tools\";import Text from\"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";var LoginScreen=function(_React$Component){_inherits(LoginScreen,_React$Component);var _super=_createSuper(LoginScreen);function LoginScreen(props){var _this;_classCallCheck(this,LoginScreen);_this=_super.call(this,props);_this.handleSubmit=function(event){event.preventDefault();_this.sendLoginRequest(_this.state.username,_this.state.password);};_this.state={username:\"\",password:\"\"};return _this;}_createClass(LoginScreen,[{key:\"validateForm\",value:function validateForm(){return this.state.username.length>0&&this.state.password.length>0;}},{key:\"sendLoginRequest\",value:function sendLoginRequest(username,password){var _this2=this;return _regeneratorRuntime.async(function sendLoginRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:timeoutPromise(2000,fetch('https://api.race24.cloud/user/auth/login',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})})).then(function(response){return response.json();}).then(function(data){if(data[1]==200){AsyncStorage.setItem('accesstoken',String(data[0].access_token));AsyncStorage.setItem('refreshtoken',String(data[0].refresh_token));AsyncStorage.setItem('userid',String(data[0].userid));AsyncStorage.setItem('usergroup',String(data[0].usergroup));console.log(data[0].usergroup);_this2.props.navigation.replace('Splash');}else{console.log(\"Login failed\");}}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,{style:{overflowY:'scroll',flex:1,backgroundColor:'#2e3742'}},React.createElement(\"div\",{className:\"container\",style:{marginLeft:'auto',marginRight:'auto'}},React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"h1\",{className:\"display-4\",style:{color:'#d0d7de',textAlign:'center'}},\" Reifenmanagement\"),React.createElement(\"br\",null)),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:400,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de'}},\" Usernamen eingeben: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",\"aria-label\":\"Server\",value:this.state.type,onChange:function onChange(username){return _this3.setState({username:username.target.value});},placeholder:\"Username\"})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group\",style:{width:400,marginLeft:'auto',marginRight:'auto'}},React.createElement(\"label\",{className:\"input-group-text\",style:{backgroundColor:'#d0d7de'}},\" Passwort eingeben: \"),React.createElement(\"input\",{type:\"password\",className:\"form-control\",\"aria-label\":\"Server\",value:this.state.place,secureTextEntry:true,onChange:function onChange(password){return _this3.setState({password:password.target.value});},placeholder:\"Passwort\"})),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"button\",{disabled:!this.validateForm(),type:\"button\",className:\"btn btn-primary\",onClick:this.handleSubmit,style:{marginLeft:'auto',marginRight:'auto'}},\" EINLOGGEN\"));}}]);return LoginScreen;}(React.Component);export{LoginScreen as default};","map":{"version":3,"sources":["/home/toni/PycharmProjects/PropraSource/frontend/Login.js"],"names":["React","styles","AsyncStorage","timeoutPromise","Text","LoginScreen","props","handleSubmit","event","preventDefault","sendLoginRequest","state","username","password","length","fetch","method","headers","body","JSON","stringify","then","response","json","data","setItem","String","access_token","refresh_token","userid","usergroup","console","log","navigation","replace","catch","error","overflowY","flex","backgroundColor","marginLeft","marginRight","color","textAlign","width","type","setState","target","value","place","validateForm","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {TextInput, Button, View, ImageBackground} from \"react-native\";\nimport {styles} from \"./styles\"\n//import { AsyncStorage } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {timeoutPromise} from \"./tools\"\nimport Text from \"react-native-web/dist/vendor/react-native/Animated/components/AnimatedText\";\n // import image from './images/audi.jpg';\n\nexport default class LoginScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\"\n        };\n    }\n    validateForm() {\n        return this.state.username.length > 0 && this.state.password.length > 0;\n    }\n    handleSubmit = event => {\n        event.preventDefault();\n        this.sendLoginRequest(this.state.username, this.state.password);\n    }\n\n\n    async sendLoginRequest(username, password) {\n       timeoutPromise(2000, fetch(\n            'https://api.race24.cloud/user/auth/login', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    username: username,\n                    password: password,\n                })\n            })\n            ).then(response => response.json()).then(data => {\n                if (data[1]==200) {\n                    AsyncStorage.setItem('accesstoken', String(data[0].access_token));\n                    AsyncStorage.setItem('refreshtoken', String(data[0].refresh_token));\n                    AsyncStorage.setItem('userid', String(data[0].userid));\n                    AsyncStorage.setItem('usergroup',String(data[0].usergroup));\n                    console.log(data[0].usergroup)\n                    this.props.navigation.replace('Splash');\n\n                }\n                else {\n                    console.log(\"Login failed\")\n                }\n            }).catch(function (error) {\n                console.log(error);\n            })\n    }\n\n // <ImageBackground source={image} resizeMode=\"cover\" style={images}> </ImageBackground>\n\n    render() {\n        return (\n            <View style={{overflowY: 'scroll', flex: 1, backgroundColor: '#2e3742'}}>\n            <div className='container' style={{marginLeft: 'auto', marginRight: 'auto'}}>\n                    <br/>\n                    <br/>\n                    <br/>\n                    <h1 className=\"display-4\" style={{color: '#d0d7de', textAlign: 'center'}}> Reifenmanagement</h1>\n                    <br/>\n                </div>\n                <br/>\n                <div className='input-group' style={{width: 400, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de'}}> Usernamen eingeben: </label>\n                    <input type='text' className='form-control' aria-label='Server' value={this.state.type}\n                            onChange={(username) => this.setState({username: username.target.value})} placeholder='Username'/>\n                </div>\n                <br/>\n                <div className='input-group' style={{width: 400, marginLeft: 'auto', marginRight: 'auto'}}>\n                    <label className='input-group-text' style={{backgroundColor: '#d0d7de'}}> Passwort eingeben: </label>\n                    <input type='password' className='form-control' aria-label='Server' value={this.state.place}\n                            secureTextEntry={true} onChange={(password) => this.setState({password:password.target.value})} placeholder='Passwort'/>\n                </div>\n                <br/>\n                <br/>\n                <button disabled={!this.validateForm()} type='button' className='btn btn-primary'\n                        onClick={this.handleSubmit} style={{marginLeft: 'auto', marginRight: 'auto'}}> EINLOGGEN\n                </button>\n            </View>\n\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}